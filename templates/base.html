<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}SecureAuth{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --bg1:#05060b;
      --bg2:#080a14;
      --glass: rgba(255,255,255,.08);
      --glass2: rgba(255,255,255,.10);
      --stroke: rgba(255,255,255,.14);
      --stroke2: rgba(255,255,255,.18);
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --brand1:#7c3aed; /* purple */
      --brand2:#22d3ee; /* cyan */
      --brand3:#f97316; /* orange */
      --ok:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;
      --shadow: 0 22px 80px rgba(0,0,0,.55);
    }

    *{ box-sizing: border-box; }
    body{
      min-height: 100vh;
      margin:0;
      color: var(--txt);
      background:
        radial-gradient(1200px circle at 10% 0%, rgba(124,58,237,.28) 0%, transparent 55%),
        radial-gradient(900px circle at 90% 10%, rgba(34,211,238,.20) 0%, transparent 50%),
        radial-gradient(800px circle at 50% 110%, rgba(249,115,22,.14) 0%, transparent 55%),
        linear-gradient(180deg, var(--bg2) 0%, var(--bg1) 100%);
      overflow-x: hidden;
    }

    /* Animated glow orbs */
    .orb{
      position: fixed;
      width: 430px;
      height: 430px;
      filter: blur(62px);
      opacity: .35;
      z-index: -1;
      animation: floaty 10s ease-in-out infinite;
      pointer-events:none;
    }
    .orb.one{ top:-130px; left:-130px; background: radial-gradient(circle, var(--brand1), transparent 62%); }
    .orb.two{ top:-180px; right:-150px; background: radial-gradient(circle, var(--brand2), transparent 62%); animation-delay: -3s; }
    .orb.three{ bottom:-210px; left:20%; background: radial-gradient(circle, var(--brand3), transparent 62%); animation-delay: -6s; }

    @keyframes floaty{
      0%,100%{ transform: translate(0,0) scale(1); }
      50%{ transform: translate(22px, -16px) scale(1.06); }
    }

    /* Navbar */
    .navbar{
      background: rgba(0,0,0,.14) !important;
      border-bottom: 1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(14px);
    }

    .brand-dot{
      width:11px;height:11px;border-radius:50%;
      display:inline-block;
      background: linear-gradient(135deg, var(--brand1), var(--brand2));
      box-shadow: 0 0 18px rgba(124,58,237,.35);
      margin-right:10px;
    }

    .muted{ color: var(--muted); }

    /* Ultra premium card */
    .auth-shell{
      position: relative;
      border-radius: 26px;
      transform-style: preserve-3d;
      box-shadow: var(--shadow);
    }

    .glass{
      border-radius: 26px;
      background: linear-gradient(180deg, var(--glass2), var(--glass));
      border: 1px solid var(--stroke);
      backdrop-filter: blur(18px);
      overflow: hidden;
    }

    /* Gradient border with mask */
    .glow-border{
      position: relative;
    }
    .glow-border:before{
      content:"";
      position:absolute;
      inset:-1px;
      border-radius: 28px;
      padding:1px;
      background: linear-gradient(120deg, rgba(124,58,237,.85), rgba(34,211,238,.70), rgba(249,115,22,.60));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events:none;
      opacity:.88;
    }

    /* Shine sweep */
    .shine:after{
      content:"";
      position:absolute;
      top:-30%;
      left:-60%;
      width: 60%;
      height: 160%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
      transform: rotate(18deg);
      animation: sweep 6s ease-in-out infinite;
      pointer-events:none;
      opacity:.7;
    }
    @keyframes sweep{
      0%{ left:-80%; opacity:.0; }
      20%{ opacity:.7; }
      45%{ left:130%; opacity:.2; }
      100%{ left:130%; opacity:0; }
    }

    /* Card entrance */
    .pop-in{ animation: pop .55s cubic-bezier(.2,.9,.2,1) both; }
    @keyframes pop{
      from{ opacity:0; transform: translateY(14px) scale(.98); }
      to{ opacity:1; transform: translateY(0) scale(1); }
    }

    /* Form controls */
    .form-control{
      border-radius: 16px !important;
      border: 1px solid rgba(255,255,255,.14) !important;
      background: rgba(255,255,255,.06) !important;
      color: var(--txt) !important;
      padding: 12px 14px 12px 44px !important; /* space for icon */
      transition: .18s ease;
    }
    .form-control:focus{
      border-color: rgba(34,211,238,.55) !important;
      box-shadow: 0 0 0 .25rem rgba(34,211,238,.12) !important;
      transform: translateY(-1px);
    }

    .input-wrap{
      position: relative;
    }
    .input-icon{
      position:absolute;
      left:14px;
      top:50%;
      transform: translateY(-50%);
      width: 18px;
      height: 18px;
      opacity: .85;
      pointer-events:none;
      filter: drop-shadow(0 8px 14px rgba(0,0,0,.25));
    }

    .toggle-btn{
      position:absolute;
      right:10px;
      top:50%;
      transform: translateY(-50%);
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.85);
      border-radius: 12px;
      padding: 6px 10px;
      font-size: 12px;
      cursor:pointer;
      transition: .15s ease;
    }
    .toggle-btn:hover{
      transform: translateY(-50%) translateY(-1px);
      background: rgba(255,255,255,.09);
    }

    /* Buttons */
    .btn{
      border-radius: 16px !important;
      padding: 11px 14px;
      transition: .18s ease;
    }

    .btn-glow{
      position: relative;
      border: 0 !important;
      color: #071018 !important;
      font-weight: 700;
      background-size: 200% 200% !important;
      background-image: linear-gradient(135deg, var(--brand1), var(--brand2), var(--brand3)) !important;
      animation: movegrad 3.5s ease infinite;
      box-shadow: 0 16px 44px rgba(124,58,237,.22);
      overflow: hidden;
    }
    @keyframes movegrad{
      0%{ background-position: 0% 50%; }
      50%{ background-position: 100% 50%; }
      100%{ background-position: 0% 50%; }
    }
    .btn-glow:hover{
      transform: translateY(-2px);
      filter: brightness(1.06);
    }
    .btn-glow:active{
      transform: translateY(0px) scale(.99);
    }

    .btn-outline-light, .btn-outline-warning{
      border-color: rgba(255,255,255,.18) !important;
    }

    /* Alerts */
    .alert{
      border-radius: 16px !important;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--txt);
    }

    /* Tiny badge */
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.85);
      font-size: 12px;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(135deg, var(--brand1), var(--brand2));
      box-shadow: 0 0 16px rgba(34,211,238,.25);
    }

    a.link-light{ text-decoration: none; }
    a.link-light:hover{ text-decoration: underline; }

    /* Password strength bar */
    .strength{
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.12);
      overflow:hidden;
    }
    .strength > span{
      display:block;
      height: 100%;
      width: 0%;
      transition: width .25s ease;
      background: linear-gradient(90deg, var(--bad), var(--warn), var(--ok));
    }
    .strength-text{
      font-size: 12px;
      color: rgba(255,255,255,.80);
    }
  </style>
</head>

<body class="text-light">
  <!-- premium animated glow -->
  <div class="orb one"></div>
  <div class="orb two"></div>
  <div class="orb three"></div>

  <nav class="navbar navbar-expand-lg navbar-dark py-3">
    <div class="container">
      <a class="navbar-brand fw-semibold" href="/">
        <span class="brand-dot"></span>SecureAuth
      </a>

      <div class="ms-auto d-flex gap-2">
        {% if current_user.is_authenticated %}
          <a class="btn btn-outline-light btn-sm" href="{{ url_for('dashboard') }}">Dashboard</a>
          <a class="btn btn-outline-warning btn-sm" href="{{ url_for('logout') }}">Logout</a>
        {% else %}
          <a class="btn btn-outline-light btn-sm" href="{{ url_for('login') }}">Login</a>
          <a class="btn btn-light btn-sm" href="{{ url_for('register') }}">Create Account</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <div class="container py-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-3">
          {% for category, msg in messages %}
            <div class="alert alert-{{ category }} mb-2" role="alert">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- 3D Tilt effect: works on elements with data-tilt -->
  <script>
    (function(){
      const cards = document.querySelectorAll('[data-tilt="true"]');
      cards.forEach(card => {
        let rAF = null;
        const strength = 10; // tilt intensity
        const glow = card.querySelector('[data-glow]');

        const onMove = (e) => {
          const rect = card.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          const px = (x / rect.width) - 0.5;
          const py = (y / rect.height) - 0.5;

          const rx = (-py * strength);
          const ry = (px * strength);

          if (rAF) cancelAnimationFrame(rAF);
          rAF = requestAnimationFrame(() => {
            card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) translateZ(0)`;
            if(glow){
              glow.style.opacity = "1";
              glow.style.background = `radial-gradient(600px circle at ${x}px ${y}px,
                rgba(34,211,238,.14), transparent 55%)`;
            }
          });
        };

        const reset = () => {
          if (rAF) cancelAnimationFrame(rAF);
          card.style.transform = "rotateX(0deg) rotateY(0deg)";
          if(glow){
            glow.style.opacity = "0";
          }
        };

        card.addEventListener('mousemove', onMove);
        card.addEventListener('mouseleave', reset);
      });
    })();
  </script>
</body>
</html>
